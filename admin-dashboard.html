<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Admin Dashboard - ToolsPay</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" />
</head>
<body class="bg-light">

  <div class="container py-4">
    <h1 class="text-center mb-4">Admin Dashboard</h1>

    <div id="login-section" class="card p-4">
      <h4>Admin Login</h4>
      <input type="email" id="email" placeholder="Email" class="form-control mb-2" />
      <input type="password" id="password" placeholder="Password" class="form-control mb-2" />
      <button id="loginBtn" class="btn btn-primary w-100">Sign In</button>
    </div>

    <div id="dashboard-section" class="d-none">
      <button id="logoutBtn" class="btn btn-danger mb-3">Logout</button>

      <h4>Rates</h4>
      <div class="card p-3 mb-3">
        <input type="number" id="usdToNgn" placeholder="USD to NGN" class="form-control mb-2" />
        <input type="number" id="giftcardBase" placeholder="Gift Card Base Rate" class="form-control mb-2" />
        <button id="saveRates" class="btn btn-success">Save Rates</button>
      </div>

      <h4>Wallets</h4>
      <div class="card p-3 mb-3">
        <input type="text" id="btcAddress" placeholder="BTC Address" class="form-control mb-2" />
        <input type="text" id="usdtTRC20" placeholder="USDT (TRC20) Address" class="form-control mb-2" />
        <input type="text" id="usdtBEP20" placeholder="USDT (BEP20) Address" class="form-control mb-2" />
        <button id="saveWallets" class="btn btn-success">Save Wallets</button>
      </div>

      <h4>Tags</h4>
      <div class="card p-3 mb-3">
        <input type="text" id="tagChime" placeholder="Chime Tag" class="form-control mb-2" />
        <input type="text" id="tagZelle" placeholder="Zelle Tag" class="form-control mb-2" />
        <input type="text" id="tagVenmo" placeholder="Venmo Tag" class="form-control mb-2" />
        <input type="text" id="tagPaypal" placeholder="Paypal Tag" class="form-control mb-2" />
        <button id="saveTags" class="btn btn-success">Save Tags</button>
      </div>

      <h4>Announcements</h4>
      <div class="card p-3 mb-3">
        <textarea id="announcement" placeholder="Write announcement..." class="form-control mb-2"></textarea>
        <button id="saveAnnouncement" class="btn btn-success">Save Announcement</button>
      </div>
    </div>
  </div>

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>

  <script>
    // Your Firebase config
    const firebaseConfig = {
      apiKey: "AIzaSyD-BIOpzkQBtpW1LQk7Rf3c-ZvyIbvEc7c",
      authDomain: "toolspay-54167.firebaseapp.com",
      projectId: "toolspay-54167",
      storageBucket: "toolspay-54167.firebasestorage.app",
      messagingSenderId: "71318117342",
      appId: "1:71318117342:web:1952711453e19e19281b4f"
    };

    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
    const db = firebase.firestore();

    const loginSection = document.getElementById("login-section");
    const dashboardSection = document.getElementById("dashboard-section");

    // Login
    document.getElementById("loginBtn").addEventListener("click", () => {
      const email = document.getElementById("email").value;
      const password = document.getElementById("password").value;
      auth.signInWithEmailAndPassword(email, password)
        .then(() => {
          loginSection.classList.add("d-none");
          dashboardSection.classList.remove("d-none");
        })
        .catch(err => alert(err.message));
    });

    // Logout
    document.getElementById("logoutBtn").addEventListener("click", () => {
      auth.signOut().then(() => {
        loginSection.classList.remove("d-none");
        dashboardSection.classList.add("d-none");
      });
    });

    // Save Rates
    document.getElementById("saveRates").addEventListener("click", () => {
      db.collection("rates").doc("default").set({
        usdToNgn: parseFloat(document.getElementById("usdToNgn").value),
        giftcardBase: parseFloat(document.getElementById("giftcardBase").value)
      }).then(() => alert("Rates updated!"));
    });

    // Save Wallets
    document.getElementById("saveWallets").addEventListener("click", () => {
      db.collection("wallets").doc("default").set({
        btc: { address: document.getElementById("btcAddress").value },
        usdt: { 
          networks: [
            { network: "TRC20", address: document.getElementById("usdtTRC20").value },
            { network: "BEP20", address: document.getElementById("usdtBEP20").value }
          ]
        }
      }).then(() => alert("Wallets updated!"));
    });

    // Save Tags
    document.getElementById("saveTags").addEventListener("click", () => {
      db.collection("tags").doc("default").set({
        chime: document.getElementById("tagChime").value,
        zelle: document.getElementById("tagZelle").value,
        venmo: document.getElementById("tagVenmo").value,
        paypal: document.getElementById("tagPaypal").value
      }).then(() => alert("Tags updated!"));
    });

    // Save Announcement
    document.getElementById("saveAnnouncement").addEventListener("click", () => {
      db.collection("announcements").doc("default").set({
        text: document.getElementById("announcement").value
      }).then(() => alert("Announcement updated!"));
    });
  </script>
</body>
</html>
