<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin Dashboard - ToolsPay</title>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js"></script>
  <style>
    body { font-family: Arial, sans-serif; margin: 0; padding: 0; }
    header { background: #333; color: white; padding: 10px; text-align: center; }
    .container { padding: 20px; }
    .card { border: 1px solid #ccc; padding: 15px; margin-bottom: 20px; border-radius: 8px; }
    input, select, button { padding: 8px; margin: 5px 0; width: 100%; }
    button { background: #333; color: white; border: none; cursor: pointer; }
    button:hover { background: #555; }
  </style>
</head>
<body>

<header>
  <h1>Admin Dashboard</h1>
</header>

<div class="container" id="login-section">
  <h2>Admin Login</h2>
  <input type="email" id="email" placeholder="Email">
  <input type="password" id="password" placeholder="Password">
  <button onclick="login()">Login</button>
  <p id="login-error" style="color:red;"></p>
</div>

<div class="container" id="dashboard-section" style="display:none;">
  <h2>Welcome, Admin</h2>
  <button onclick="logout()">Logout</button>

  <div class="card">
    <h3>Gift Card Rates</h3>
    <p>Add / Update gift cards and rates by country</p>
    <input type="text" id="giftCardName" placeholder="Gift Card Name (e.g. Amazon)">
    <input type="text" id="country" placeholder="Country (e.g. USA)">
    <input type="number" id="rate" placeholder="Rate in NGN">
    <button onclick="saveGiftCard()">Save Gift Card</button>
    <div id="giftCardList"></div>
  </div>

  <div class="card">
    <h3>Online Wallet Rates</h3>
    <input type="text" id="walletName" placeholder="Wallet Name (e.g. PayPal)">
    <input type="number" id="walletRate" placeholder="Rate in NGN">
    <button onclick="saveWallet()">Save Wallet</button>
    <div id="walletList"></div>
  </div>

  <div class="card">
    <h3>Announcements</h3>
    <input type="text" id="announcementText" placeholder="Type announcement">
    <button onclick="saveAnnouncement()">Save Announcement</button>
    <div id="announcementList"></div>
  </div>
</div>

<script>
  // Firebase Config (YOURS)
  const firebaseConfig = {
    apiKey: "AIzaSyD-BIOpzkQBtpW1LQk7Rf3c-ZvyIbvEc7c",
    authDomain: "toolspay-54167.firebaseapp.com",
    projectId: "toolspay-54167",
    storageBucket: "toolspay-54167.firebasestorage.app",
    messagingSenderId: "71318117342",
    appId: "1:71318117342:web:1952711453e19e19281b4f"
  };

  // Init Firebase
  firebase.initializeApp(firebaseConfig);
  const auth = firebase.auth();
  const db = firebase.firestore();

  // Login
  function login() {
    const email = document.getElementById("email").value;
    const password = document.getElementById("password").value;
    auth.signInWithEmailAndPassword(email, password)
      .then(() => {
        document.getElementById("login-section").style.display = "none";
        document.getElementById("dashboard-section").style.display = "block";
        loadGiftCards();
        loadWallets();
        loadAnnouncements();
      })
      .catch(err => {
        document.getElementById("login-error").innerText = err.message;
      });
  }

  // Logout
  function logout() {
    auth.signOut().then(() => {
      document.getElementById("dashboard-section").style.display = "none";
      document.getElementById("login-section").style.display = "block";
    });
  }

  // Save Gift Card
  function saveGiftCard() {
    const name = document.getElementById("giftCardName").value;
    const country = document.getElementById("country").value;
    const rate = document.getElementById("rate").value;
    db.collection("giftCards").add({ name, country, rate })
      .then(() => loadGiftCards());
  }

  function loadGiftCards() {
    db.collection("giftCards").get().then(snapshot => {
      let html = "";
      snapshot.forEach(doc => {
        const data = doc.data();
        html += `<p>${data.name} (${data.country}): ₦${data.rate}</p>`;
      });
      document.getElementById("giftCardList").innerHTML = html;
    });
  }

  // Save Wallet
  function saveWallet() {
    const name = document.getElementById("walletName").value;
    const rate = document.getElementById("walletRate").value;
    db.collection("wallets").add({ name, rate })
      .then(() => loadWallets());
  }

  function loadWallets() {
    db.collection("wallets").get().then(snapshot => {
      let html = "";
      snapshot.forEach(doc => {
        const data = doc.data();
        html += `<p>${data.name}: ₦${data.rate}</p>`;
      });
      document.getElementById("walletList").innerHTML = html;
    });
  }

  // Save Announcement
  function saveAnnouncement() {
    const text = document.getElementById("announcementText").value;
    db.collection("announcements").add({ text })
      .then(() => loadAnnouncements());
  }

  function loadAnnouncements() {
    db.collection("announcements").get().then(snapshot => {
      let html = "";
      snapshot.forEach(doc => {
        const data = doc.data();
        html += `<p>${data.text}</p>`;
      });
      document.getElementById("announcementList").innerHTML = html;
    });
  }
</script>

</body>
</html>
