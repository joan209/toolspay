<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Customer Dashboard</title>
  <link rel="stylesheet" href="styles.css" />
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f5f5f5;
      margin: 0;
      padding: 0;
    }
    header {
      background: #222;
      color: white;
      padding: 15px;
      text-align: center;
      font-size: 20px;
    }
    .container {
      max-width: 900px;
      margin: auto;
      padding: 15px;
    }
    .card {
      background: white;
      padding: 15px;
      border-radius: 8px;
      margin-bottom: 15px;
      box-shadow: 0 0 8px rgba(0,0,0,0.1);
    }
    .title {
      font-weight: bold;
      margin-bottom: 10px;
    }
    .wallet {
      background: #fafafa;
      padding: 8px;
      border: 1px solid #ddd;
      border-radius: 5px;
      margin-bottom: 5px;
      word-break: break-all;
    }
    @media (max-width: 600px) {
      .card { font-size: 14px; }
    }
  </style>
</head>
<body>
  <header>Customer Dashboard</header>
  <div style="text-align:center; margin:12px 0;">
  <a href="chat.html" style="display:inline-block; padding:10px 16px; background:#111; color:#fff; text-decoration:none; border-radius:10px; font-weight:700;">
    ðŸ’¬ Live Chat with Admin
  </a>
</div>
  <div class="container">
    
    <div class="card" id="ratesCard">
      <div class="title">Current Rates</div>
      <div>USD to NGN: <span id="usdToNgn">Loading...</span></div>
      <div>Gift Card Base: <span id="giftcardBase">Loading...</span></div>
    </div>

    <div class="card" id="walletsCard">
      <div class="title">Wallet Addresses</div>
      <div><strong>Bitcoin (BTC):</strong></div>
      <div class="wallet" id="btcWallet">Loading...</div>
      
      <div><strong>USDT Wallets:</strong></div>
      <div id="usdtWallets">Loading...</div>
    </div>

    <div class="card" id="onlineWalletCard">
      <div class="title">Online Digital Wallets</div>
      <div id="digitalWalletTags">Contact Admin via Live Chat for wallet tag.</div>
    </div>

  </div>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.3/firebase-app.js";
    import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/10.12.3/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "YOUR_API_KEY",
      authDomain: "YOUR_PROJECT_ID.firebaseapp.com",
      projectId: "YOUR_PROJECT_ID",
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    async function loadDashboardData() {
      try {
        // Load rates
        const ratesSnap = await getDoc(doc(db, "rates", "default"));
        if (ratesSnap.exists()) {
          const data = ratesSnap.data();
          document.getElementById("usdToNgn").textContent = data.usdToNgn || "N/A";
          document.getElementById("giftcardBase").textContent = data.giftcardBase || "N/A";
        }

        // Load wallets
        const walletsSnap = await getDoc(doc(db, "wallets", "default"));
        if (walletsSnap.exists()) {
          const wData = walletsSnap.data();
          document.getElementById("btcWallet").textContent = wData.btc?.address || "N/A";

          const usdtList = wData.usdt?.networks?.map(n => 
            `${n.network}: ${n.address}`
          ).join("<br>") || "N/A";
          document.getElementById("usdtWallets").innerHTML = usdtList;

          // Online digital wallet tags placeholder
          const tags = wData.tags || {};
          let tagHTML = "";
          for (let key in tags) {
            tagHTML += `<div><strong>${key}:</strong> ${tags[key]}</div>`;
          }
          if (tagHTML) {
            document.getElementById("digitalWalletTags").innerHTML = tagHTML;
          }
        }
      } catch (err) {
        console.error("Error loading dashboard:", err);
      }
    }

    loadDashboardData();
  </script>
</body>
</html>
