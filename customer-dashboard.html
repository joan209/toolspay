<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Customer Dashboard</title>
  <link rel="stylesheet" href="styles.css" />
  <style>
    body { font-family: Arial, sans-serif; margin: 0; padding: 0; background: #f4f4f4; }
    header { background: #333; color: white; padding: 10px; text-align: center; }
    .container { max-width: 800px; margin: auto; padding: 20px; background: white; }
    .wallet-section, .rates-section { margin-bottom: 20px; padding: 15px; border: 1px solid #ccc; border-radius: 8px; }
    h2 { margin-top: 0; }
    button { background: #28a745; color: white; border: none; padding: 10px 20px; cursor: pointer; border-radius: 5px; }
    button:hover { background: #218838; }
  </style>
</head>
<body>

  <header>
    <h1>Welcome to Your Dashboard</h1>
  </header>

  <div class="container">

    <div class="rates-section">
      <h2>Current Rates</h2>
      <p>USD to NGN: <span id="usdToNgn">Loading...</span></p>
      <p>Gift Card Base Rate: <span id="giftcardBase">Loading...</span></p>
    </div>

    <div class="wallet-section">
      <h2>Wallet Addresses</h2>
      <h3>Bitcoin (BTC):</h3>
      <p id="btcAddress">Loading...</p>

      <h3>USDT Wallets:</h3>
      <ul id="usdtNetworks">Loading...</ul>
    </div>

    <div class="wallet-section">
      <h2>Sell from Online Digital Wallet</h2>
      <p>You can sell from Chime, Zelle, Venmo, PayPal â€” click the button below to contact admin for payment tag.</p>
      <button onclick="openLiveChat()">Contact Admin to Sell</button>
    </div>

  </div>

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore.js"></script>
  
  <script>
    // Firebase Config
    const firebaseConfig = {
      apiKey: "YOUR_API_KEY",
      authDomain: "YOUR_PROJECT_ID.firebaseapp.com",
      projectId: "YOUR_PROJECT_ID",
    };

    const app = firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    async function loadRatesAndWallets() {
      const ratesDoc = await db.collection("rates").doc("default").get();
      if (ratesDoc.exists) {
        const data = ratesDoc.data();
        document.getElementById("usdToNgn").innerText = data.usdToNgn;
        document.getElementById("giftcardBase").innerText = data.giftcardBase;
      }

      const walletsDoc = await db.collection("wallets").doc("default").get();
      if (walletsDoc.exists) {
        const data = walletsDoc.data();
        document.getElementById("btcAddress").innerText = data.btc.address;

        const list = document.getElementById("usdtNetworks");
        list.innerHTML = "";
        data.usdt.networks.forEach(net => {
          const li = document.createElement("li");
          li.innerText = `${net.network}: ${net.address}`;
          list.appendChild(li);
        });
      }
    }

    function openLiveChat() {
      if (typeof Tawk_API !== "undefined") {
        Tawk_API.maximize();
      } else {
        alert("Live chat not loaded yet, please wait a moment.");
      }
    }

    loadRatesAndWallets();
  </script>

  <!-- Tawk.to Live Chat -->
  <!--Start of Tawk.to Script-->
  <script type="text/javascript">
  var Tawk_API=Tawk_API||{}, Tawk_LoadStart=new Date();
  (function(){
  var s1=document.createElement("script"),s0=document.getElementsByTagName("script")[0];
  s1.async=true;
  s1.src='https://embed.tawk.to/689c8ac8fcd547192dde2522/1j2hns8ng';
  s1.charset='UTF-8';
  s1.setAttribute('crossorigin','*');
  s0.parentNode.insertBefore(s1,s0);
  })();
  </script>
  <!--End of Tawk.to Script-->

</body>
</html>
