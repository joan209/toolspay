<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Customer Dashboard - ToolsPay</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      background: #f4f4f4;
      color: #333;
    }
    header {
      background: #222;
      color: #fff;
      padding: 15px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    header h1 { font-size: 20px; }
    nav a {
      margin: 0 10px;
      color: white;
      text-decoration: none;
    }
    nav a:hover { text-decoration: underline; }
    .toggle-btn {
      cursor: pointer;
      background: #444;
      color: #fff;
      padding: 5px 10px;
      border: none;
      border-radius: 5px;
    }
    main { padding: 20px; }
    .tab {
      display: none;
    }
    .tab.active {
      display: block;
    }
    .balance-box {
      background: #fff;
      padding: 15px;
      margin-bottom: 15px;
      border-radius: 8px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    input, select, button {
      margin: 5px 0;
      padding: 10px;
      width: 100%;
      max-width: 400px;
    }
    .dark-mode {
      background: #111;
      color: #eee;
    }
    .dark-mode header {
      background: #000;
    }
    .dark-mode .balance-box {
      background: #222;
      color: #fff;
    }
  </style>
</head>
<body>
  <header>
    <h1>ToolsPay Dashboard</h1>
    <nav>
      <a href="#" onclick="showTab('giftcards')">Gift Cards</a>
      <a href="#" onclick="showTab('crypto')">Crypto</a>
      <a href="#" onclick="showTab('wallets')">Wallets</a>
      <a href="#" onclick="showTab('history')">History</a>
      <a href="profile.html">Profile</a>
      <a href="#" onclick="logout()">Logout</a>
    </nav>
    <button class="toggle-btn" onclick="toggleDarkMode()">ðŸŒ™</button>
  </header>

  <main>
    <div class="balance-box">
      <h2>Available Balance: â‚¦0</h2>
      <button onclick="requestWithdraw()">Withdraw</button>
    </div>

    <!-- Gift Cards -->
    <div id="giftcards" class="tab active">
      <h2>Sell Gift Cards</h2>
      <label>Select Gift Card:</label>
      <select id="giftCardType">
        <option>Amazon</option>
        <option>iTunes</option>
        <option>Google Play</option>
        <option>Steam</option>
      </select>
      <label>Enter Face Value (â‚¦):</label>
      <input type="number" id="giftValue"/>
      <p id="giftRate">Rate: â‚¦740/$</p>
      <p id="giftPayout">You Get: â‚¦0</p>
      <label>Upload Card Images:</label>
      <input type="file" id="giftImages" multiple />
      <button>Submit Trade</button>
    </div>

    <!-- Crypto -->
    <div id="crypto" class="tab">
      <h2>Sell Crypto</h2>
      <label>Select Crypto:</label>
      <select id="cryptoType">
        <option>BTC</option>
        <option>USDT</option>
      </select>
      <p>Send to this Wallet:</p>
      <p id="cryptoWallet">bc1qexampleBTCaddress</p>
      <img src="btc-qrcode.png" alt="QR Code" width="150"/>
    </div>

    <!-- Wallets -->
    <div id="wallets" class="tab">
      <h2>Sell Online Wallets</h2>
      <select>
        <option>PayPal</option>
        <option>Zelle</option>
        <option>Venmo</option>
        <option>Chime</option>
      </select>
      <p>Rate: â‚¦700/$</p>
      <input type="number" placeholder="Enter Amount"/>
      <button>Start Chat with Admin</button>
    </div>

    <!-- History -->
    <div id="history" class="tab">
      <h2>Trade History</h2>
      <p>No trades yet.</p>
    </div>
  </main>

  <script type="module">
    // Firebase config
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js";
    import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-auth.js";

    const firebaseConfig = {
      apiKey: "AIzaSyD-BIOpzkQBtpW1LQk7Rf3c-ZvyIbvEc7c",
      authDomain: "toolspay-54167.firebaseapp.com",
      projectId: "toolspay-54167",
      storageBucket: "toolspay-54167.appspot.com",
      messagingSenderId: "71318117342",
      appId: "1:71318117342:web:1952711453e19e19281b4f"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);

    onAuthStateChanged(auth, (user) => {
      if (!user) {
        window.location.href = "signin.html";
      }
    });

    function logout() {
      signOut(auth).then(() => {
        window.location.href = "signin.html";
      });
    }

    // Dark mode
    function toggleDarkMode() {
      document.body.classList.toggle("dark-mode");
    }

    // Tabs
    function showTab(tabId) {
      document.querySelectorAll(".tab").forEach(tab => tab.classList.remove("active"));
      document.getElementById(tabId).classList.add("active");
    }

    // Gift card payout calc
    document.getElementById("giftValue").addEventListener("input", function() {
      const value = parseFloat(this.value) || 0;
      const rate = 740;
      document.getElementById("giftPayout").innerText = "You Get: â‚¦" + (value * rate);
    });

    function requestWithdraw() {
      alert("Withdraw request sent to Admin.");
    }
  </script>
</body>
</html>
