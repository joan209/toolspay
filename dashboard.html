<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Customer Dashboard - ToolsPay</title>
  <link rel="stylesheet" href="styles.css" />
  <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-firestore.js"></script>
</head>
<body class="light">
  <!-- Navbar -->
  <nav>
    <div class="logo">ToolsPay</div>
    <ul id="nav-links">
      <li><a href="dashboard.html">Dashboard</a></li>
      <li><a href="trades.html">Gift Cards</a></li>
      <li><a href="crypto.html">Crypto</a></li>
      <li><a href="wallet.html">Wallets</a></li>
      <li id="profile-link" style="display:none;"><a href="profile.html">Profile</a></li>
      <li><button id="darkToggle">üåô / ‚òÄÔ∏è</button></li>
      <li><button id="logoutBtn">Logout</button></li>
    </ul>
  </nav>

  <!-- Dashboard Content -->
  <main>
    <section class="balance-section">
      <h2>Available Balance</h2>
      <p id="user-balance">‚Ç¶0.00</p>
      <button id="withdrawBtn">Withdraw</button>
    </section>

    <section class="trade-options">
      <h2>Choose what to Trade</h2>
      <div class="card-grid">
        <a href="trades.html" class="card">Gift Cards</a>
        <a href="crypto.html" class="card">Sell Crypto (BTC/USDT)</a>
        <a href="wallet.html" class="card">Digital Wallets</a>
      </div>
    </section>

    <section class="history-section">
      <h2>Transaction History</h2>
      <div id="history-list">No history yet.</div>
    </section>

    <!-- Live Chat -->
    <div class="chat-support">
      <button id="chatBtn">üí¨ Chat with Admin</button>
    </div>
  </main>

  <script type="module" src="firebase-auth.js"></script>
  <script>
    // Dark/Light mode toggle
    const darkToggle = document.getElementById("darkToggle");
    const body = document.body;
    darkToggle.addEventListener("click", () => {
      body.classList.toggle("dark");
      body.classList.toggle("light");
    });

    // Show profile only after login
    firebase.auth().onAuthStateChanged(user => {
      if (user) {
        document.getElementById("profile-link").style.display = "inline-block";
      } else {
        window.location.href = "signin.html";
      }
    });

    // Logout
    document.getElementById("logoutBtn").addEventListener("click", () => {
      firebase.auth().signOut();
    });

    // Chat button
    document.getElementById("chatBtn").addEventListener("click", () => {
      alert("Chat with admin will open here (to be connected).");
    });
  </script>
</body>
</html>
