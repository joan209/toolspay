<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Gift Card Trade - ToolsPay</title>
  <link rel="stylesheet" href="styles.css">
  <script src="firebase-auth.js" defer></script>
  <script src="trades.js" defer></script>
</head>
<body class="light">
  <!-- Navbar -->
  <nav class="navbar">
    <div class="logo">TP</div>
    <ul class="nav-links">
      <li><a href="dashboard.html">Dashboard</a></li>
      <li><a href="wallet.html">Wallets</a></li>
      <li><a href="trades.html" class="active">Gift Cards</a></li>
      <li><a href="profile.html">Profile</a></li>
      <li><button id="toggleMode">ğŸŒ™</button></li>
      <li><button id="logoutBtn">Logout</button></li>
    </ul>
  </nav>

  <!-- Gift Card Trade Section -->
  <section class="container">
    <h2>Sell Gift Cards</h2>
    <p>Select your gift card type, enter the card value, and upload pictures.</p>

    <form id="tradeForm">
      <label for="cardType">Gift Card Type:</label>
      <select id="cardType" required>
        <option value="">-- Select Card --</option>
        <option value="amazon">Amazon (â‚¦740/$)</option>
        <option value="apple">Apple (â‚¦730/$)</option>
        <option value="google">Google Play (â‚¦720/$)</option>
        <option value="steam">Steam (â‚¦710/$)</option>
      </select>

      <label for="amount">Card Value (USD):</label>
      <input type="number" id="amount" placeholder="Enter value in USD" required>

      <p id="payout"></p>

      <label for="uploads">Upload Card & Receipt (multiple allowed):</label>
      <input type="file" id="uploads" accept="image/*" multiple required>

      <button type="submit">Submit Trade</button>
    </form>

    <button class="chatBtn" onclick="openChat()">ğŸ’¬ Live Chat Admin</button>
  </section>

  <script>
    // Rates for cards
    const cardRates = {
      amazon: 740,
      apple: 730,
      google: 720,
      steam: 710
    };

    const cardType = document.getElementById("cardType");
    const amountInput = document.getElementById("amount");
    const payoutDisplay = document.getElementById("payout");

    // Calculate payout
    amountInput.addEventListener("input", updatePayout);
    cardType.addEventListener("change", updatePayout);

    function updatePayout() {
      const type = cardType.value;
      const amount = amountInput.value;
      if (type && amount) {
        const payout = amount * cardRates[type];
        payoutDisplay.textContent = `Expected Payout: â‚¦${payout.toLocaleString()}`;
      } else {
        payoutDisplay.textContent = "";
      }
    }

    // Handle trade submit
    document.getElementById("tradeForm").addEventListener("submit", (e) => {
      e.preventDefault();
      alert("Trade submitted! Admin will review your card.");
      // Later: push data & images to Firebase Storage + Firestore
    });

    // Live chat placeholder
    function openChat() {
      alert("Connecting to admin chat...");
    }

    // Dark/Light Mode
    const toggleBtn = document.getElementById("toggleMode");
    toggleBtn.addEventListener("click", () => {
      document.body.classList.toggle("dark");
      document.body.classList.toggle("light");
      toggleBtn.textContent =
        document.body.classList.contains("dark") ? "â˜€ï¸" : "ğŸŒ™";
    });
  </script>
</body>
</html>
